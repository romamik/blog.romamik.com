---
import { Icon } from "astro-icon/components";
import "../styles/global.css";
const { title, disableToc } = Astro.props;
---

<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <script is:inline>
      document.documentElement.classList.remove("no-js");
    </script>
    <script src="../lib/theme.ts"></script>
    <script>
      document.getElementById("toc-btn")?.addEventListener("click", () => {
        document.getElementById("toc")?.classList.toggle("toc-open");
      });
    </script>
  </head>
  <body
    class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 w-screen"
  >
    <header
      class="top-0 fixed h-12 z-50 w-full bg-gray-50 dark:bg-gray-950 border=1 flex items-center"
    >
      <div class="w-full lg:w-240 mx-auto p-4 flex items-center gap-4">
        <a href="/">Home</a>
        <a href="/about">About</a>
        <span class="flex-1"></span>
        <div class="theme-btn-container js-only">
          <button id="theme-light" class="theme-btn"> Light </button>
          <button id="theme-dark" class="theme-btn"> Dark </button>
          <button id="theme-auto" class="theme-btn"> Auto </button>
        </div>
        <button id="toc-btn" class="md:hidden btn js-only">
          <Icon name="mdi:table-of-contents" size="1.4em" />
        </button>
      </div>
    </header>
    <div class="w-full lg:w-240 mx-auto flex">
      <main class="p-4 mt-12 mb-24 flex-1 prose dark:prose-invert max-w-none">
        <slot />
      </main>
      {
        disableToc ? (
          ""
        ) : (
          <aside
            id="toc"
            class="mt-12 w-64 right-0 z-100 fixed md:relative md:right-auto self-start"
          >
            <div class="p-4 rounded-b-lg w-64 fixed overflow-y-scroll bg-gray-200 dark:bg-gray-800">
              <slot name="toc" />
            </div>
          </aside>
        )
      }
    </div>
  </body>
</html>
